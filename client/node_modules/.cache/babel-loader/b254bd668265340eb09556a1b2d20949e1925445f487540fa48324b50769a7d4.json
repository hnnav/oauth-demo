{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vahahen\\\\Documents\\\\example-oauth\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CLIENT_ID = \"43010ef9017ddeca7ba0\";\nfunction App() {\n  _s();\n  const [rerender, setRerender] = useState(false);\n  const [user, setUser] = useState({});\n  useEffect(() => {\n    // http://localhost:3000/?code=59eb625bf3dd4fa4c999\n\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const codeParam = urlParams.get(\"code\");\n    console.log(codeParam);\n    if (codeParam && localStorage.getItem(\"accessToken\") === null) {\n      async function getAccessToken() {\n        await fetch(\"http://localhost:4000/getAccessToken?code=\" + codeParam, {\n          method: \"GET\"\n        }).then(response => {\n          return response.json();\n        }).then(data => {\n          console.log(data);\n          if (data.access_token) {\n            localStorage.setItem(\"accessToken\", data.access_token);\n            setRerender(!rerender);\n          }\n        });\n      }\n      getAccessToken();\n    }\n  }, []);\n  async function getUserData() {\n    await fetch(\"http://localhost:4000/getUserData\", {\n      method: \"GET\",\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"accessToken\")\n      }\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      console.log(data);\n      setUser(data);\n    });\n  }\n  function loginWithGithub() {\n    window.location.assign(\"https://github.com/login/oauth/authorize?client_id=\" + CLIENT_ID);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: localStorage.getItem(\"accessToken\") ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          localStorage.removeItem(\"accessToken\");\n          setRerender(!rerender);\n        },\n        children: \"Log Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"User Data:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: getUserData,\n        children: \"Get Data\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), Object.keys(user).length !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Welcome, \", user.login]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          width: \"100px\",\n          height: \"100px\",\n          src: user.avatar_url\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: user.html_url,\n          children: \"Github profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: loginWithGithub,\n      children: \"Login with Github\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"H+1Gp+I/NmS9PITAv+ycfD6KvWE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","CLIENT_ID","App","rerender","setRerender","user","setUser","queryString","window","location","search","urlParams","URLSearchParams","codeParam","get","console","log","localStorage","getItem","getAccessToken","fetch","method","then","response","json","data","access_token","setItem","getUserData","headers","loginWithGithub","assign","removeItem","Object","keys","length","login","avatar_url","html_url"],"sources":["C:/Users/vahahen/Documents/example-oauth/client/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react'\n\nconst CLIENT_ID = \"43010ef9017ddeca7ba0\"\n\nfunction App() {\n\n  const [rerender, setRerender] = useState(false);\n  const [user, setUser] = useState({})\n\n  useEffect(() => {\n    // http://localhost:3000/?code=59eb625bf3dd4fa4c999\n\n    const queryString = window.location.search\n    const urlParams = new URLSearchParams(queryString)\n    const codeParam = urlParams.get(\"code\")\n    console.log(codeParam)\n\n    if (codeParam && (localStorage.getItem(\"accessToken\") === null)) {\n      async function getAccessToken() {\n        await fetch(\"http://localhost:4000/getAccessToken?code=\" + codeParam, {\n          method: \"GET\"\n        }).then((response) => {\n          return response.json();\n        }).then((data) => {\n          console.log(data);\n          if (data.access_token) {\n            localStorage.setItem(\"accessToken\", data.access_token);\n            setRerender(!rerender);\n          }\n        })\n      }\n      getAccessToken();\n    }\n  }, []);\n\n  async function getUserData() {\n    await fetch(\"http://localhost:4000/getUserData\", {\n      method: \"GET\",\n      headers: {\n        \"Authorization\" : \"Bearer \" + localStorage.getItem(\"accessToken\")\n      }\n    }).then((response) => {\n      return response.json();\n    }).then((data) => {\n      console.log(data);\n      setUser(data);\n    })\n  }\n\n  function loginWithGithub() {\n    window.location.assign(\"https://github.com/login/oauth/authorize?client_id=\" + CLIENT_ID)\n  }\n\n  return (\n    <div className=\"App\">\n      {localStorage.getItem(\"accessToken\") ?\n        <div>\n          <button onClick={() => {localStorage.removeItem(\"accessToken\"); setRerender(!rerender); }}>\n            Log Out\n          </button>\n          <h1>User Data:</h1>\n          <button onClick={getUserData}>Get Data</button>\n          {Object.keys(user).length !== 0 ?\n            <div>\n              <h4>Welcome, {user.login}</h4>\n              <img width=\"100px\" height=\"100px\" src={user.avatar_url} />\n              <a href={user.html_url}>Github profile</a>\n            </div>\n          :\n            <div>\n\n            </div>\n          }\n        </div>\n      :\n        <button onClick={loginWithGithub}>\n          Login with Github\n        </button>\n      }\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAA;AAE3C,MAAMC,SAAS,GAAG,sBAAsB;AAExC,SAASC,GAAG,GAAG;EAAA;EAEb,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGJ,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACK,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,CAAC,CAAC,CAAC;EAEpCD,SAAS,CAAC,MAAM;IACd;;IAEA,MAAMQ,WAAW,GAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM;IAC1C,MAAMC,SAAS,GAAG,IAAIC,eAAe,CAACL,WAAW,CAAC;IAClD,MAAMM,SAAS,GAAGF,SAAS,CAACG,GAAG,CAAC,MAAM,CAAC;IACvCC,OAAO,CAACC,GAAG,CAACH,SAAS,CAAC;IAEtB,IAAIA,SAAS,IAAKI,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,KAAK,IAAK,EAAE;MAC/D,eAAeC,cAAc,GAAG;QAC9B,MAAMC,KAAK,CAAC,4CAA4C,GAAGP,SAAS,EAAE;UACpEQ,MAAM,EAAE;QACV,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;UACpB,OAAOA,QAAQ,CAACC,IAAI,EAAE;QACxB,CAAC,CAAC,CAACF,IAAI,CAAEG,IAAI,IAAK;UAChBV,OAAO,CAACC,GAAG,CAACS,IAAI,CAAC;UACjB,IAAIA,IAAI,CAACC,YAAY,EAAE;YACrBT,YAAY,CAACU,OAAO,CAAC,aAAa,EAAEF,IAAI,CAACC,YAAY,CAAC;YACtDtB,WAAW,CAAC,CAACD,QAAQ,CAAC;UACxB;QACF,CAAC,CAAC;MACJ;MACAgB,cAAc,EAAE;IAClB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,eAAeS,WAAW,GAAG;IAC3B,MAAMR,KAAK,CAAC,mCAAmC,EAAE;MAC/CC,MAAM,EAAE,KAAK;MACbQ,OAAO,EAAE;QACP,eAAe,EAAG,SAAS,GAAGZ,YAAY,CAACC,OAAO,CAAC,aAAa;MAClE;IACF,CAAC,CAAC,CAACI,IAAI,CAAEC,QAAQ,IAAK;MACpB,OAAOA,QAAQ,CAACC,IAAI,EAAE;IACxB,CAAC,CAAC,CAACF,IAAI,CAAEG,IAAI,IAAK;MAChBV,OAAO,CAACC,GAAG,CAACS,IAAI,CAAC;MACjBnB,OAAO,CAACmB,IAAI,CAAC;IACf,CAAC,CAAC;EACJ;EAEA,SAASK,eAAe,GAAG;IACzBtB,MAAM,CAACC,QAAQ,CAACsB,MAAM,CAAC,qDAAqD,GAAG9B,SAAS,CAAC;EAC3F;EAEA,oBACE;IAAK,SAAS,EAAC,KAAK;IAAA,UACjBgB,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,gBAClC;MAAA,wBACE;QAAQ,OAAO,EAAE,MAAM;UAACD,YAAY,CAACe,UAAU,CAAC,aAAa,CAAC;UAAE5B,WAAW,CAAC,CAACD,QAAQ,CAAC;QAAE,CAAE;QAAA,UAAC;MAE3F;QAAA;QAAA;QAAA;MAAA,QAAS,eACT;QAAA,UAAI;MAAU;QAAA;QAAA;QAAA;MAAA,QAAK,eACnB;QAAQ,OAAO,EAAEyB,WAAY;QAAA,UAAC;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAS,EAC9CK,MAAM,CAACC,IAAI,CAAC7B,IAAI,CAAC,CAAC8B,MAAM,KAAK,CAAC,gBAC7B;QAAA,wBACE;UAAA,WAAI,WAAS,EAAC9B,IAAI,CAAC+B,KAAK;QAAA;UAAA;UAAA;UAAA;QAAA,QAAM,eAC9B;UAAK,KAAK,EAAC,OAAO;UAAC,MAAM,EAAC,OAAO;UAAC,GAAG,EAAE/B,IAAI,CAACgC;QAAW;UAAA;UAAA;UAAA;QAAA,QAAG,eAC1D;UAAG,IAAI,EAAEhC,IAAI,CAACiC,QAAS;UAAA,UAAC;QAAc;UAAA;UAAA;UAAA;QAAA,QAAI;MAAA;QAAA;QAAA;QAAA;MAAA,QACtC,gBAEN;QAAA;QAAA;QAAA;MAAA,QAEM;IAAA;MAAA;MAAA;MAAA;IAAA,QAEJ,gBAEN;MAAQ,OAAO,EAAER,eAAgB;MAAA,UAAC;IAElC;MAAA;MAAA;MAAA;IAAA;EAAS;IAAA;IAAA;IAAA;EAAA,QAEP;AAEV;AAAC,GA7EQ5B,GAAG;AAAA,KAAHA,GAAG;AA+EZ,eAAeA,GAAG;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}